<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å·¥å…·èœå•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      padding: 20px;
    }

    /* é¡¶éƒ¨æ ‡é¢˜æ  */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      -webkit-app-region: drag;
    }

    .header h1 {
      font-size: 18px;
      font-weight: 600;
      color: #fff;
    }

    .close-btn {
      -webkit-app-region: no-drag;
      width: 32px;
      height: 32px;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* å·¥å…·åˆ—è¡¨ */
    .tools-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      flex: 1;
      overflow-y: auto;
    }

    .tool-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .tool-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .tool-item:active {
      transform: translateY(0);
    }

    .tool-icon {
      font-size: 28px;
    }

    .tool-info {
      flex: 1;
    }

    .tool-name {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin-bottom: 4px;
    }

    .tool-desc {
      font-size: 13px;
      color: #666;
    }

    .tool-shortcut {
      font-size: 12px;
      color: #999;
      background: #f0f0f0;
      padding: 4px 8px;
      border-radius: 4px;
    }

    /* åˆ†ç±»æ ‡é¢˜ */
    .category-title {
      font-size: 14px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
      margin-top: 16px;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .category-title:first-child {
      margin-top: 0;
    }

    /* æ»šåŠ¨æ¡æ ·å¼ */
    .tools-list::-webkit-scrollbar {
      width: 6px;
    }

    .tools-list::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
    }

    .tools-list::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
    }

    .tools-list::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.5);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
    <div class="header">
      <h1>ğŸ”§ å·¥å…·ç®±</h1>
      <button class="close-btn" id="closeBtn">Ã—</button>
    </div>

    <!-- å·¥å…·åˆ—è¡¨ -->
    <div class="tools-list">
      <!-- æˆªå›¾å·¥å…· -->
      <div class="category-title">ğŸ“¸ æˆªå›¾å·¥å…·</div>
      <div class="tool-item" data-tool="screenshot">
        <div class="tool-icon">ğŸ“¸</div>
        <div class="tool-info">
          <div class="tool-name">åŒºåŸŸæˆªå›¾</div>
          <div class="tool-desc">é€‰æ‹©å±å¹•åŒºåŸŸè¿›è¡Œæˆªå›¾</div>
        </div>
        <div class="tool-shortcut">Ctrl+Shift+A</div>
      </div>

      <div class="tool-item" data-tool="fullscreen-screenshot">
        <div class="tool-icon">ğŸ–¼ï¸</div>
        <div class="tool-info">
          <div class="tool-name">å…¨å±æˆªå›¾</div>
          <div class="tool-desc">æˆªå–æ•´ä¸ªå±å¹•</div>
        </div>
      </div>

      <!-- å¼€å‘å·¥å…· -->
      <div class="category-title">ğŸ› ï¸ å¼€å‘å·¥å…·</div>
      <div class="tool-item" data-tool="devtools">
        <div class="tool-icon">ğŸ›</div>
        <div class="tool-info">
          <div class="tool-name">å¼€å‘è€…å·¥å…·</div>
          <div class="tool-desc">æ‰“å¼€è°ƒè¯•æ§åˆ¶å°</div>
        </div>
        <div class="tool-shortcut">Ctrl+Shift+I</div>
      </div>

      <div class="tool-item" data-tool="reload">
        <div class="tool-icon">ğŸ”„</div>
        <div class="tool-info">
          <div class="tool-name">é‡æ–°åŠ è½½</div>
          <div class="tool-desc">é‡æ–°åŠ è½½åº”ç”¨</div>
        </div>
        <div class="tool-shortcut">Ctrl+R</div>
      </div>

      <!-- å…¶ä»–å·¥å…· -->
      <div class="category-title">ğŸ“¦ å…¶ä»–</div>
      <div class="tool-item" data-tool="screenshot-history">
        <div class="tool-icon">ğŸ“</div>
        <div class="tool-info">
          <div class="tool-name">æˆªå›¾å†å²</div>
          <div class="tool-desc">æŸ¥çœ‹æ‰€æœ‰æˆªå›¾è®°å½•</div>
        </div>
      </div>

      <div class="tool-item" data-tool="open-folder">
        <div class="tool-icon">ğŸ“‚</div>
        <div class="tool-info">
          <div class="tool-name">æ‰“å¼€æˆªå›¾æ–‡ä»¶å¤¹</div>
          <div class="tool-desc">åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰“å¼€</div>
        </div>
      </div>

      <!-- å¼€å‘å·¥å…· -->
      <div class="category-title">ğŸ› ï¸ å¼€å‘</div>
      <div class="tool-item" data-tool="animation-test">
        <div class="tool-icon">ğŸ­</div>
        <div class="tool-info">
          <div class="tool-name">åŠ¨ç”»æµ‹è¯•</div>
          <div class="tool-desc">æµ‹è¯•æ‰€æœ‰åŠ¨ç”»æ•ˆæœ</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const { ipcRenderer } = require('electron');

    // å…³é—­çª—å£
    document.getElementById('closeBtn').addEventListener('click', () => {
      ipcRenderer.send('close-child-window', 'tools-menu');
    });

    // å·¥å…·é¡¹ç‚¹å‡»äº‹ä»¶
    document.querySelectorAll('.tool-item').forEach(item => {
      item.addEventListener('click', () => {
        const tool = item.dataset.tool;
        handleToolClick(tool);
      });
    });

    // å¤„ç†å·¥å…·ç‚¹å‡»
    async function handleToolClick(tool) {
      console.log('[ToolsMenu] Tool clicked:', tool);

      switch (tool) {
        case 'screenshot':
          // å¯åŠ¨åŒºåŸŸæˆªå›¾ - é€šè¿‡ä¸»è¿›ç¨‹å¤„ç†
          ipcRenderer.send('start-screenshot');
          break;

        case 'fullscreen-screenshot':
          // å…¨å±æˆªå›¾
          ipcRenderer.send('start-fullscreen-screenshot');
          break;

        case 'devtools':
          // æ‰“å¼€å¼€å‘è€…å·¥å…·
          if (window.electron && window.electron.openDevTools) {
            window.electron.openDevTools();
          }
          break;

        case 'reload':
          // é‡æ–°åŠ è½½
          location.reload();
          break;

        case 'screenshot-history':
          // æŸ¥çœ‹æˆªå›¾å†å²ï¼ˆæš‚æ—¶ç”¨ alertï¼‰
          alert('æˆªå›¾å†å²åŠŸèƒ½å¼€å‘ä¸­...\n\næ‚¨å¯ä»¥ç›´æ¥è®¿é—®æˆªå›¾æ–‡ä»¶å¤¹æŸ¥çœ‹æ‰€æœ‰æˆªå›¾');
          break;

        case 'open-folder':
          // æ‰“å¼€æˆªå›¾æ–‡ä»¶å¤¹
          ipcRenderer.send('open-screenshots-folder');
          break;

        case 'animation-test':
          // æ‰“å¼€åŠ¨ç”»æµ‹è¯•çª—å£
          if (window.electron && window.electron.createChildWindow) {
            window.electron.createChildWindow({
              id: 'animation-test',
              title: 'åŠ¨ç”»æµ‹è¯•',
              width: 400,
              height: 600,
              html: 'windows/animation-test.html'
            });
          }
          // ä¸å…³é—­å·¥å…·èœå•ï¼Œè®©ç”¨æˆ·å¯ä»¥çœ‹åˆ°
          setTimeout(() => {
            ipcRenderer.send('close-child-window', 'tools-menu');
          }, 100);
          return; // æå‰è¿”å›ï¼Œä¸å…³é—­å·¥å…·èœå•
          break;
      }

      // å…³é—­å·¥å…·èœå•
      setTimeout(() => {
        ipcRenderer.send('close-child-window', 'tools-menu');
      }, 100);
    }

    // ESC å…³é—­
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        ipcRenderer.send('close-child-window', 'tools-menu');
      }
    });
  </script>
</body>
</html>
